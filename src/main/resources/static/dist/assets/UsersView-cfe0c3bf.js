import{_ as z,b,e as N,d as A,r as i,h as U,o as m,c as j,f as v,a,w as o,i as T,g as _,j as I,A as p,k as y,l as w,m as D}from"./index-99a2111e.js";const P=b(!1),{cookies:q}=N(),g={"Content-Type":"application/json",Authorization:q.get("myCookie")},E=A({beforeCreate(){document.querySelector("body").setAttribute("style","margin: 0")},setup(){let t=I({list:[]}),e=new window.FormData;const{cookies:l}=N(),c=b(!1),C=b(0),k={"Content-Type":"application/json",Authorization:l.get("myCookie")},f=b(0),h=b("");return p.post("/api/admin/user/get",{pageNum:20,page:0,context:"",isBlack:!1},{headers:k}).then(s=>{if(console.log(s),s.data.body.users!=null)for(var d=0;d<s.data.body.users.length;d++){var r=s.data.body.users[d];r.blacked==!0?r.status="已拉黑":r.status="正常",t.list.push(r)}console.log(t.list)}).catch(s=>{alert("网络错误"),console.log(s)}),{formData:e,cookies:l,headers:k,loading:P,tableData:t,checked1:c,totalNum:f,currentPage:C,context:h}},methods:{search(){this.loading=!0,p.post("/api/admin/user/get",{pageNum:20,page:0,context:this.context,isBlack:this.checked1},{headers:g}).then(t=>{if(console.log(t),this.tableData.list=[],t.data.body.users!=null)for(var e=0;e<t.data.body.users.length;e++){var l=t.data.body.users[e];l.blacked==!0?l.status="已拉黑":l.status="正常",this.tableData.list.push(l)}this.totalNum=t.data.body.sumNum}).catch(t=>{console.log(t)}),this.loading=!1},handleCurrentChange(t){this.loading=!0,this.currentPage=t,p.post("/api/admin/user/get",{pageNum:20,page:t-1,context:this.context,isBlack:this.checked1},{headers:g}).then(e=>{if(this.tableData.list=[],e.data.body.users!=null)for(var l=0;l<e.data.body.users.length;l++){var c=e.data.body.users[l];c.blacked==!0?c.status="已拉黑":c.status="正常",tableData.list.push(c)}this.totalNum=e.data.body.sumNum,this.loading=!1}).catch(e=>{console.log(e)})},black(t){p.post("/api/admin/user/black",{userId:this.tableData.list[t].id,operation:1},{headers:g}).then(e=>{console.log(e),this.tableData.list[t].blacked=!0,this.tableData.list[t].status="已拉黑"}).catch(e=>{console.log(e)})},undoblack(t){p.post("/api/admin/user/black",{userId:this.tableData.list[t].id,operation:0},{headers:g}).then(e=>{console.log(e),this.tableData.list[t].blacked=!1,this.tableData.list[t].status="正常"}).catch(e=>{console.log(e)})}}}),F={id:"root"},M={class:"basic-box",style:{margin:"20px"}},O={id:"table",class:"basic-box",style:{margin:"20px"}};function S(t,e,l,c,C,k){const f=i("el-checkbox"),h=i("el-col"),s=i("el-input"),d=i("el-button"),r=i("el-row"),u=i("el-table-column"),V=i("el-table"),x=i("el-pagination"),$=U("loading");return m(),j("div",F,[v("div",M,[a(r,null,{default:o(()=>[a(h,{span:4,offset:2},{default:o(()=>[a(f,{modelValue:t.checked1,"onUpdate:modelValue":e[0]||(e[0]=n=>t.checked1=n),label:"只显示拉黑用户",size:"large"},null,8,["modelValue"])]),_:1}),a(h,{span:4},{default:o(()=>[a(s,{modelValue:t.context,"onUpdate:modelValue":e[1]||(e[1]=n=>t.context=n),class:"w-50 m-2",placeholder:"搜索用户"},null,8,["modelValue"])]),_:1}),a(h,{span:6,offset:1},{default:o(()=>[a(d,{type:"primary",onClick:t.search},{default:o(()=>[y("搜索")]),_:1},8,["onClick"])]),_:1})]),_:1})]),v("div",O,[T((m(),_(V,{data:t.tableData.list,style:{width:"100%"},"max-height":"250"},{default:o(()=>[a(u,{prop:"email",label:"邮箱",width:"200"}),a(u,{prop:"username",label:"用户昵称",width:"120"}),a(u,{prop:"phone",label:"手机号",width:"180"}),a(u,{prop:"status",label:"状态",width:"100"}),a(u,{prop:"bio",label:"个性签名",width:"400"}),a(u,{fixed:"right",label:"Operations"},{default:o(n=>[t.tableData.list[n.$index].blacked?D("",!0):(m(),_(d,{key:0,link:"",type:"primary",size:"small",onClick:w(B=>t.black(n.$index),["prevent"])},{default:o(()=>[y(" 拉黑 ")]),_:2},1032,["onClick"])),t.tableData.list[n.$index].blacked?(m(),_(d,{key:1,link:"",type:"primary",size:"small",onClick:w(B=>t.undoblack(n.$index),["prevent"])},{default:o(()=>[y(" 取消拉黑 ")]),_:2},1032,["onClick"])):D("",!0)]),_:1})]),_:1},8,["data"])),[[$,t.loading]]),a(x,{onCurrentChange:t.handleCurrentChange,layout:"total, prev, pager, next",total:t.totalNum},null,8,["onCurrentChange","total"])])])}const H=z(E,[["render",S]]);export{H as default};
