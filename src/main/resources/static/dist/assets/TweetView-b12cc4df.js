import{_ as S,e as z,b as n,d as F,r as C,h as A,i as B,o as h,c as _,a as o,w as a,u as H,j as L,A as p,E as d,F as M,n as R,m as b,g as I,f as s,t as f,k as j}from"./index-99a2111e.js";import"./lodash-99f8e625.js";import{_ as U}from"./relex-7f042c97.js";const{cookies:q}=z(),w={"Content-Type":"application/json",Authorization:q.get("myCookie")},k=n(0),G=F({setup(){var t=n(""),e=n(0),g=n(""),x=n(""),V=n(""),$=n(0),i=n(0);const u=n(0),D=H();let l=L({list:[]});const{cookies:N}=z(),v=n(!0),c=n(0),y={"Content-Type":"application/json",Authorization:N.get("myCookie")};return p.post("/api/admin/tweet/get/",{pageNum:20,page:0},{headers:y}).then(r=>{if(console.log(r),r.data.body!=null){for(var T=0;T<r.data.body.tweets.length;T++){var E=r.data.body.tweets[T];l.list.push(E)}k.value=r.data.body.sumNum,c.value+=1,u.value=l.list.length}u.value>0&&(p.post("/api/admin/tweet/content/",{tweetId:l.list[0].id},{headers:y}).then(m=>{console.log(m),t.value=l.list[0].title,x.value=m.data.body.time,V.value=m.data.body.content,e.value=l.list[0].username}).catch(m=>{d("网络错误"),console.log(m)}),v.value=!1)}).catch(r=>{console.log(r)}),{tableData:l,headers:y,titleC:t,userC:e,dateC:x,contentC:V,idC:$,totalNum:i,empty:v,reason:g,router:D,page:c,count:u}},methods:{load(){this.count!=k.value&&(p.post("/api/admin/tweet/get/",{pageNum:20,page:this.page},{headers:w}).then(t=>{if(console.log(t),t.data.body.tweets!=null)for(var e=0;e<t.data.body.tweets.length;e++){var g=t.data.body.tweets[e];tableData.list.push(g)}this.count=this.tableData.list.length,this.page+=1}).catch(t=>{console.log(t)}),this.count+20<=k.value?this.count+=20:this.count=k.value)},handelClick(t){console.log(t),this.idC=this.tableData.list[t-1].id,p.post("/api/admin/tweet/content/",{tweetId:this.idC},{headers:w}).then(e=>{console.log(e),this.titleC=e.data.body.title,this.dateC=e.data.body.time,this.contentC=e.data.body.content,this.userC=e.data.body.username}).catch(e=>{d("网络错误"),console.log(e)})},pass(){p.post("/api/admin/tweet/censor/",{tweetId:this.idC,operate:0,reason:""},{headers:w}).then(t=>{t.data.code!=0?d(t.data.message):d("Success!"),setTimeout(1e3),this.router.go(0)}).catch(t=>{d("网络错误"),console.log(t)})},fail(){p.post("/api/admin/tweet/censor/",{tweetId:this.idC,operate:1,reason:this.reason},{headers:w}).then(t=>{t.data.code!=0?d(t.data.message):d("Success!"),setTimeout(1e3),this.router.go(0)}).catch(t=>{d("网络错误"),console.log(t)})}}}),J={id:"root"},K=s("span",{style:{"margin-left":"50px"}},"待审核帖子：",-1),O={key:0,class:"infinite-list",style:{overflow:"auto"}},P=["onClick"],Q={key:1,style:{"margin-left":"50px",top:"30px"}},W={class:"basic-box",id:"infomation",style:{"font-size":"8px",height:"fix-content"}},X=s("p",{style:{"text-align":"center"}},"基本信息",-1),Y={class:"basic-box",id:"comment"},Z=s("p",{style:{"text-align":"center"}},"帖子内容",-1),tt={class:"basic-box",id:"bottom"},et=s("div",{style:{"margin-top":"20vh","margin-left":"20vw"}},[s("img",{src:U,alt:"Header",height:"200"})],-1);function at(t,e,g,x,V,$){const i=C("el-col"),u=C("el-row"),D=C("el-input"),l=C("el-button"),N=A("infinite-scroll"),v=A("loading");return B((h(),_("div",J,[o(u,null,{default:a(()=>[o(i,{span:4,offset:1},{default:a(()=>[K,this.empty?b("",!0):B((h(),_("ul",O,[(h(!0),_(M,null,R(t.count,c=>(h(),_("li",{key:c,class:"infinite-list-item",onClick:y=>t.handelClick(c)},f(t.tableData.list[c-1].username),9,P))),128))])),[[N,t.load]]),this.empty?(h(),_("div",Q," 无待审核内容 ")):b("",!0)]),_:1}),this.empty?b("",!0):(h(),I(i,{key:0,span:12,offset:1},{default:a(()=>[s("div",W,[X,o(u,null,{default:a(()=>[o(i,{span:8},{default:a(()=>[s("span",null,"标题："+f(this.titleC),1)]),_:1}),o(i,{span:8},{default:a(()=>[s("span",null,"用户："+f(this.userC),1)]),_:1}),o(i,{span:8},{default:a(()=>[s("span",null,"日期："+f(this.dateC),1)]),_:1})]),_:1})]),s("div",Y,[Z,s("span",null,f(this.contentC),1)]),s("div",tt,[o(D,{modelValue:t.reason,"onUpdate:modelValue":e[0]||(e[0]=c=>t.reason=c),placeholder:"请输入内容",style:{"margin-bottom":"20px"}},null,8,["modelValue"]),o(u,null,{default:a(()=>[o(i,{span:20},{default:a(()=>[o(l,{type:"danger",onClick:t.fail},{default:a(()=>[j("驳回")]),_:1},8,["onClick"])]),_:1}),o(i,{span:2},{default:a(()=>[o(l,{type:"success",onClick:t.pass},{default:a(()=>[j("通过")]),_:1},8,["onClick"])]),_:1})]),_:1})])]),_:1})),this.empty?(h(),I(i,{key:1,span:12,offset:1},{default:a(()=>[et]),_:1})):b("",!0)]),_:1})])),[[v,this.loading]])}const it=S(G,[["render",at]]);export{it as default};
