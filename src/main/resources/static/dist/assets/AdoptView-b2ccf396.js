import{_ as S,e as T,b as o,d as z,r as _,h as N,i as A,o as c,c as r,a as e,w as a,m as f,j as E,A as b,E as p,F as j,n as F,g as $,f as n,t as g,k as B}from"./index-99a2111e.js";import{_ as I}from"./relex-7f042c97.js";const{cookies:q}=T(),k={"Content-Type":"application/json",Authorization:q.get("myCookie")},H=o(!1),L=z({beforeCreate(){document.querySelector("body").setAttribute("style","margin: 0")},setup(){let t=E({list:[]});const i=o(0),y=o(""),C=o(""),w=o(""),x=o(""),s=o(""),u=o(0),m=o(""),D=o(""),h=o(!0),v=o(0);return b.post("/api/admin/adoption/get/",{pageNum:20,page:0},{headers:k}).then(l=>{if(console.log(l),l.data.body.adoptions!=null){for(var d=0;d<l.data.body.adoptions.length;d++){var V=l.data.body.adoptions[d];t.list.push(V)}console.log(t.list),h.value=!1,u.value=t.list[0].id,C.value=t.list[0].reason,x.value=t.list[0].aniname,s.value=t.list[0].username,m.value=t.list[0].time,i.value=t.list.length,v.value=l.data.body.sumNum}}).catch(l=>{alert("网络错误"),console.log(l)}),{loading:H,tableData:t,empty:h,phone:y,content:C,email:w,aniname:x,username:s,count:i,idC:u,date:m,max:v,date:m,reason:D}},methods:{load(){this.count!=this.max&&(b.post("/api/admin/adoption/get/",{pageNum:20,page:this.page},{headers:k}).then(t=>{if(console.log(t),t.data.body.adoptions!=null)for(var i=0;i<t.data.body.adoptions.length;i++){var y=t.data.body.adoptions[i];tableData.list.push(y)}count.value=tableData.list.length,page.value+=1,max.value=t.data.body.sumNum,count.value>0&&(empty.value=!1)}).catch(t=>{console.log(t)}),this.count+20<=this.max?this.count+=20:this.count=this.max)},handelClick(t){this.idC=tableData.list[t-1].id,this.content=tableData.list[t-1].reason,this.aniname=tableData.list[t-1].aniname,this.username=tableData.list[t-1].username,this.date=tableData.list[t-1].time},pass(){b.post("/api/admin/adoption/censor/",{adoptionId:this.idC,operate:0,reason:""},{headers:k}).then(t=>{t.data.code!=0?p(t.data.message):p("Success!"),setTimeout(1e3),this.router.go(0)}).catch(t=>{p("网络错误"),console.log(t)})},fail(){b.post("/api/admin/adoption/censor/",{commentId:this.idC,operate:1,reason:this.reason},{headers:k}).then(t=>{t.data.code!=0?p(t.data.message):p("Success!"),setTimeout(1e3),this.router.go(0)}).catch(t=>{p("网络错误"),console.log(t)})}}}),M={id:"root"},U=n("span",{style:{"margin-left":"50px"}},"待审核申请：",-1),G={key:0,style:{"margin-left":"50px",top:"30px"}},J={key:1,class:"infinite-list",style:{overflow:"auto"}},K=["onClick"],O={class:"basic-box",id:"infomation",style:{"font-size":"8px"}},P=n("p",{style:{"text-align":"center"}},"基本信息",-1),Q={class:"basic-box",id:"comment"},R=n("p",null,"申请理由",-1),W={style:{"font-size":"small"}},X=n("div",{style:{"margin-top":"20vh","margin-left":"20vw"}},[n("img",{src:I,alt:"Header",height:"200"})],-1),Y={key:0,class:"basic-box",id:"bottom"};function Z(t,i,y,C,w,x){const s=_("el-col"),u=_("el-row"),m=_("el-divider"),D=_("el-input"),h=_("el-button"),v=N("infinite-scroll"),l=N("loading");return A((c(),r("div",M,[e(u,null,{default:a(()=>[e(s,{span:4,offset:1},{default:a(()=>[U,this.empty?(c(),r("div",G," 无待审核内容 ")):f("",!0),this.empty?f("",!0):A((c(),r("ul",J,[(c(!0),r(j,null,F(t.count,d=>(c(),r("li",{key:d,class:"infinite-list-item",onClick:V=>t.handelClick(d)},g(this.tableData.list[d-1].username),9,K))),128))])),[[v,t.load]])]),_:1}),this.empty?f("",!0):(c(),$(s,{key:0,span:12,offset:1},{default:a(()=>[n("div",O,[P,e(u,null,{default:a(()=>[e(s,{span:8},{default:a(()=>[n("span",null,"领养申请动物: "+g(this.aniname),1)]),_:1}),e(s,{span:8},{default:a(()=>[n("span",null,"用户："+g(this.username),1)]),_:1}),e(s,{span:8},{default:a(()=>[n("span",null,"日期："+g(this.date),1)]),_:1})]),_:1})]),n("div",Q,[R,n("span",W,g(this.content),1),e(m)])]),_:1})),this.empty?(c(),$(s,{key:1,span:12,offset:1},{default:a(()=>[X]),_:1})):f("",!0)]),_:1}),this.empty?f("",!0):(c(),r("div",Y,[e(D,{modelValue:this.reason,"onUpdate:modelValue":i[0]||(i[0]=d=>this.reason=d),placeholder:"请输入内容",style:{"margin-bottom":"20px"}},null,8,["modelValue"]),e(u,null,{default:a(()=>[e(s,{span:20},{default:a(()=>[e(h,{type:"danger",onClick:t.fail},{default:a(()=>[B("驳回")]),_:1},8,["onClick"])]),_:1}),e(s,{span:2},{default:a(()=>[e(h,{type:"success",onClick:t.pass},{default:a(()=>[B("通过")]),_:1},8,["onClick"])]),_:1})]),_:1})]))])),[[l,this.loading]])}const at=S(L,[["render",Z]]);export{at as default};
