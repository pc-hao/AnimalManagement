import{_ as E,e as S,d as j,r as v,h as F,o as d,c as r,a as o,w as e,m as p,b as a,u as H,j as L,A as y,E as h,i as M,F as R,n as U,g as B,f as l,t as _,k as I}from"./index-99a2111e.js";import"./lodash-99f8e625.js";import{_ as q}from"./relex-7f042c97.js";const{cookies:T}=S(),b={"Content-Type":"application/json",Authorization:T.get("myCookie")},G=j({setup(){const t=a(!0),i=a("");var f=a("aa");const w=a(""),D=H();var N={headers:{Authorization:""}};const s=a(0),m=a(0),g=a(0);let n=L({list:[]});const k=a(""),c=a(0),C=a(""),V=a(""),$=a(""),A=a(0);return y.post("/api/admin/comment/get/",{pageNum:20,page:0},{headers:b}).then(u=>{if(console.log(u),u.data.body.comments!=null)for(var x=0;x<u.data.body.comments.length;x++){var z=u.data.body.comments[x];n.list.push(z)}s.value=n.list.length,g.value+=1,m.value=u.data.body.sumNum,s.value>0&&(t.value=!1,c.value=n.list[0].tweetId,A.value=n.list[0].id,V.value=n.list[0].username,$.value=n.list[0].content,C.value=n.list[0].time)}).catch(u=>{console.log(u)}),{password:w,account:i,empty:t,token:f,cookies:T,config:N,count:s,tableData:n,page:g,max:m,reason:k,tweetId:c,date:C,userName:V,content:$,router:D,idC:A}},methods:{load(){this.count!=this.max&&(y.post("/api/admin/comment/get/",{pageNum:20,page:this.page},{headers:b}).then(t=>{if(console.log(t),t.data.body.comments!=null)for(var i=0;i<t.data.body.comments.length;i++){var f=t.data.body.comments[i];tableData.list.push(f)}count.value=tableData.list.length,page.value+=1,max.value=t.data.body.sumNum,count.value>0&&(empty.value=!1)}).catch(t=>{console.log(t)}),this.count+20<=this.max?this.count+=20:this.count=this.max)},handelClick(t){this.idC=this.tableData.list[t-1].id,this.userName=this.tableData.list[t-1].username,this.date=this.tableData.list[t-1].time,this.content=this.tableData.list[t-1].content},pass(){y.post("/api/admin/comment/censor/",{commentId:this.idC,operate:0,reason:""},{headers:b}).then(t=>{t.data.code!=0?h(t.data.message):h("Success!"),setTimeout(1e3),this.router.go(0)}).catch(t=>{h("网络错误"),console.log(t)})},fail(){y.post("/api/admin/comment/censor/",{commentId:this.idC,operate:1,reason:this.reason},{headers:b}).then(t=>{t.data.code!=0?h(t.data.message):h("Success!"),setTimeout(1e3),this.router.go(0)}).catch(t=>{h("网络错误"),console.log(t)})}}}),J={id:"root"},K=l("span",{style:{"margin-left":"50px"}},"待审核评论：",-1),O={key:0,class:"infinite-list",style:{overflow:"auto"}},P=["onClick"],Q={key:1,style:{"margin-left":"50px",top:"30px"}},W={class:"basic-box",id:"infomation",style:{"font-size":"8px"}},X=l("p",{style:{"text-align":"center"}},"基本信息",-1),Y={class:"basic-box",id:"comment"},Z=l("p",{style:{"text-align":"center"}},"评论内容",-1),tt=l("div",{style:{"margin-top":"20vh","margin-left":"20vw"}},[l("img",{src:q,alt:"Header",height:"200"})],-1),et={key:0,class:"basic-box",id:"bottom"};function at(t,i,f,w,D,N){const s=v("el-col"),m=v("el-row"),g=v("el-input"),n=v("el-button"),k=F("infinite-scroll");return d(),r("div",J,[o(m,null,{default:e(()=>[o(s,{span:4,offset:1},{default:e(()=>[K,this.empty?p("",!0):M((d(),r("ul",O,[(d(!0),r(R,null,U(t.count,c=>(d(),r("li",{key:c,class:"infinite-list-item",onClick:C=>t.handelClick(c)},_(t.tableData.list[c-1].username),9,P))),128))])),[[k,t.load]]),this.empty?(d(),r("div",Q," 无待审核内容 ")):p("",!0)]),_:1}),this.empty?p("",!0):(d(),B(s,{key:0,span:12,offset:1},{default:e(()=>[l("div",W,[X,o(m,null,{default:e(()=>[o(s,{span:4},{default:e(()=>[l("span",null,"帖子id: "+_(this.idC),1)]),_:1}),o(s,{span:4},{default:e(()=>[l("span",null,"用户："+_(this.userName),1)]),_:1}),o(s,{span:16},{default:e(()=>[l("span",null,"时间: "+_(this.date),1)]),_:1})]),_:1})]),l("div",Y,[Z,l("span",null,_(this.content),1)])]),_:1})),this.empty?(d(),B(s,{key:1,span:12,offset:1},{default:e(()=>[tt]),_:1})):p("",!0)]),_:1}),this.empty?p("",!0):(d(),r("div",et,[o(g,{modelValue:this.reason,"onUpdate:modelValue":i[0]||(i[0]=c=>this.reason=c),placeholder:"请输入内容",style:{"margin-bottom":"20px"}},null,8,["modelValue"]),o(m,null,{default:e(()=>[o(s,{span:20},{default:e(()=>[o(n,{type:"danger",onClick:t.fail},{default:e(()=>[I("驳回")]),_:1},8,["onClick"])]),_:1}),o(s,{span:2},{default:e(()=>[o(n,{type:"success",onClick:t.pass},{default:e(()=>[I("通过")]),_:1},8,["onClick"])]),_:1})]),_:1})]))])}const lt=E(G,[["render",at]]);export{lt as default};
