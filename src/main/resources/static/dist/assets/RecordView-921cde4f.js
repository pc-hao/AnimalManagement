import{a as o,q as B,B as X,P as g,s as E,v as Y,x as le,d as Z,y as ie,T as re,z as se,C as de,D as j,G as ue,H as ce,L as fe,_ as me,e as pe,r as p,h as he,o as q,c as ge,f as S,w as r,i as be,g as ve,b as y,j as ye,A as V,E as _,k as N,l as G}from"./index-99a2111e.js";var Ce={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm-32 232c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V296zm32 440a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"exclamation-circle",theme:"filled"};const _e=Ce;function H(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?Object(arguments[t]):{},n=Object.keys(a);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(l){return Object.getOwnPropertyDescriptor(a,l).enumerable}))),n.forEach(function(l){Ne(e,l,a[l])})}return e}function Ne(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var A=function(t,a){var n=H({},t,a.attrs);return o(B,H({},n,{icon:_e}),null)};A.displayName="ExclamationCircleFilled";A.inheritAttrs=!1;const Oe=A;var Ve={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm32 664c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V456c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272zm-32-344a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"info-circle",theme:"filled"};const we=Ve;function J(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?Object(arguments[t]):{},n=Object.keys(a);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(l){return Object.getOwnPropertyDescriptor(a,l).enumerable}))),n.forEach(function(l){Te(e,l,a[l])})}return e}function Te(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var L=function(t,a){var n=J({},t,a.attrs);return o(B,J({},n,{icon:we}),null)};L.displayName="InfoCircleFilled";L.inheritAttrs=!1;const ke=L;function $e(){var e=[].slice.call(arguments,0);return e.length===1?e[0]:function(){for(var a=0;a<e.length;a++)e[a]&&e[a].apply&&e[a].apply(this,arguments)}}const Pe={mixins:[X],props:{duration:g.number.def(1.5),closable:g.looseBool,prefixCls:g.string,update:g.looseBool,closeIcon:g.any,onClose:g.func},watch:{duration:function(){this.restartCloseTimer()}},mounted:function(){this.startCloseTimer()},updated:function(){this.update&&this.restartCloseTimer()},beforeUnmount:function(){this.clearCloseTimer(),this.willDestroy=!0},methods:{close:function(t){t&&t.stopPropagation(),this.clearCloseTimer(),this.__emit("close")},startCloseTimer:function(){var t=this;this.clearCloseTimer(),!this.willDestroy&&this.duration&&(this.closeTimer=setTimeout(function(){t.close()},this.duration*1e3))},clearCloseTimer:function(){this.closeTimer&&(clearTimeout(this.closeTimer),this.closeTimer=null)},restartCloseTimer:function(){this.clearCloseTimer(),this.startCloseTimer()}},render:function(){var t,a=this.prefixCls,n=this.closable,l=this.clearCloseTimer,m=this.startCloseTimer,f=this.close,c=this.$attrs,i="".concat(a,"-notice"),v=(t={},E(t,"".concat(i),1),E(t,"".concat(i,"-closable"),n),t),u=Y(this,"closeIcon");return o("div",{class:v,style:c.style||{right:"50%"},onMouseenter:l,onMouseleave:m},[o("div",{class:"".concat(i,"-content")},[le(this)]),n?o("a",{tabindex:"0",onClick:f,class:"".concat(i,"-close")},[u||o("span",{class:"".concat(i,"-close-x")},null)]):null])}};var xe=globalThis&&globalThis.__rest||function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,n=Object.getOwnPropertySymbols(e);l<n.length;l++)t.indexOf(n[l])<0&&Object.prototype.propertyIsEnumerable.call(e,n[l])&&(a[n[l]]=e[n[l]]);return a};function Ie(){}var De=0,Se=Date.now();function je(){return"rcNotification_".concat(Se,"_").concat(De++)}var z=Z({mixins:[X],props:{prefixCls:g.string.def("rc-notification"),transitionName:g.string,animation:g.oneOfType([g.string,g.object]).def("fade"),maxCount:g.number,closeIcon:g.any},data:function(){return{notices:[]}},methods:{getTransitionName:function(){var t=this.$props,a=t.transitionName;return!a&&t.animation&&(a="".concat(t.prefixCls,"-").concat(t.animation)),a},add:function(t){var a=t.key=t.key||je(),n=this.$props.maxCount;this.setState(function(l){var m=l.notices,f=m.map(function(i){return i.key}).indexOf(a),c=m.concat();return f!==-1?c.splice(f,1,t):(n&&m.length>=n&&(t.updateKey=c[0].updateKey||c[0].key,c.shift()),c.push(t)),{notices:c}})},remove:function(t){this.setState(function(a){return{notices:a.notices.filter(function(n){return n.key!==t})}})}},render:function(){var t=this,a=this.prefixCls,n=this.notices,l=this.remove,m=this.getTransitionName,f=this.$attrs,c=ie(m()),i=n.map(function(u,w){var C=!!(w===n.length-1&&u.updateKey),s=u.updateKey?u.updateKey:u.key,h=u.content,O=u.duration,P=u.closable,k=u.onClose,x=u.style,I=u.class,D=$e(l.bind(t,u.key),k),F={prefixCls:a,duration:O,closable:P,update:C,closeIcon:Y(t,"closeIcon"),onClose:D,onClick:u.onClick||Ie,style:x,class:I,key:s};return o(Pe,F,{default:function(){return[typeof h=="function"?h():h]}})}),v=E({},a,1);return o("div",{class:v,style:f.style||{top:"65px",left:"50%"}},[o(re,se({tag:"span"},c),{default:function(){return[i]}})])}});z.newInstance=function(t,a){var n=t||{},l=n.getContainer,m=n.style,f=n.class,c=xe(n,["getContainer","style","class"]),i=document.createElement("div");if(l){var v=l();v.appendChild(i)}else document.body.appendChild(i);var u=de({mounted:function(){var C=this;this.$nextTick(function(){a({notice:function(h){C.$refs.notification.add(h)},removeNotice:function(h){C.$refs.notification.remove(h)},component:C,destroy:function(){u.unmount(i),i.parentNode&&i.parentNode.removeChild(i)}})})},render:function(){var C=j(j({},c),{ref:"notification",style:m,class:f});return o(z,C,null)}});u.mount(i)};const Ue=z;var K=3,ee,b,Fe=1,U="ant-message",te="move-up",ae=function(){return document.body},oe;function Ee(e){if(b){e(b);return}Ue.newInstance({prefixCls:U,transitionName:te,style:{top:ee},getContainer:ae,maxCount:oe},function(t){if(b){e(b);return}b=t,e(t)})}var ze={info:ke,success:ue,error:ce,warning:Oe,loading:fe};function Be(e){var t=e.duration!==void 0?e.duration:K,a=ze[e.type],n=a?o(a,null,null):"",l=e.key||Fe++,m=new Promise(function(c){var i=function(){return typeof e.onClose=="function"&&e.onClose(),c(!0)};Ee(function(v){v.notice({key:l,duration:t,style:e.style||{},class:e.class,content:function(){return o("div",{class:"".concat(U,"-custom-content").concat(e.type?" ".concat(U,"-").concat(e.type):"")},[e.icon||n,o("span",null,[e.content])])},onClose:i})})}),f=function(){b&&b.removeNotice(l)};return f.then=function(c,i){return m.then(c,i)},f.promise=m,f}function Ae(e){return Object.prototype.toString.call(e)==="[object Object]"&&!!e.content}var $={open:Be,config:function(t){t.top!==void 0&&(ee=t.top,b=null),t.duration!==void 0&&(K=t.duration),t.prefixCls!==void 0&&(U=t.prefixCls),t.getContainer!==void 0&&(ae=t.getContainer),t.transitionName!==void 0&&(te=t.transitionName,b=null),t.maxCount!==void 0&&(oe=t.maxCount,b=null)},destroy:function(){b&&(b.destroy(),b=null)}};["success","info","warning","error","loading"].forEach(function(e){$[e]=function(t,a,n){return Ae(t)?$.open(j(j({},t),{type:e})):(typeof a=="function"&&(n=a,a=void 0),$.open({content:t,duration:a,type:e,onClose:n}))}});$.warn=$.warning;const Q=$;var Le={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"};const Me=Le;function W(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?Object(arguments[t]):{},n=Object.keys(a);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(l){return Object.getOwnPropertyDescriptor(a,l).enumerable}))),n.forEach(function(l){Re(e,l,a[l])})}return e}function Re(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var M=function(t,a){var n=W({},t,a.attrs);return o(B,W({},n,{icon:Me}),null)};M.displayName="UploadOutlined";M.inheritAttrs=!1;const qe=M;const{cookies:R}=pe(),T={"Content-Type":"application/json",Authorization:R.get("myCookie")},Ge={headers:{"Content-Type":"multipart/form-data",Authorization:R.get("myCookie")}},He=Z({components:{UploadOutlined:qe},beforeCreate(){document.querySelector("body").setAttribute("style","margin: 0")},setup(){const e=y(""),t=y(""),a=y(0);y(!1);const n=y(0),l=s=>{console.log(s),s.file.status!=="uploading"&&console.log(s.file,s.fileList),s.file.status==="done"?(Q.success(`${s.file.name} file uploaded successfully`),t.value=s.response,console.log("aaa"),console.log(s)):s.file.status==="error"&&Q.error(`${s.file.name} file upload failed.`)},m=y([]),f=y(!1),c=y(!1);let i=ye({list:[]});const v=y(""),u=y(""),w=y(!1),C=y(1);return V.post("/api/admin/animal/get/",{pageNum:20,page:0,context:""},{headers:T}).then(s=>{if(console.log(s),s.data.body!=null){for(var h=0;h<s.data.body.records.length;h++){var O=s.data.body.records[h];O.adopted==!0?O.status="已领养":O.status="未领养",i.list.push(O)}n.value=s.data.body.sumNum}console.log(n)}).catch(s=>{alert("网络错误"),console.log(s)}),{cookies:R,tableData:i,dialogVisible:f,intro:v,name:u,adopted:w,fileList:m,handleChange:l,totalNum:n,context:e,lastImage:t,id:a,dialogVisible1:c,currentPage:C}},methods:{edit(e){this.intro=this.tableData.list[e].intro,this.name=this.tableData.list[e].name,this.adopted=this.tableData.list[e].adopted,this.id=this.tableData.list[e].id,this.dialogVisible=!0},add(){this.intro="",this.name="",this.adopted="",this.dialogVisible1=!0},confirm(){V.post("api/admin/animal/modify/",{recordId:this.id,name:this.name,intro:this.intro,adopted:this.adopted,imageId:this.lastImage},{headers:T}).then(e=>{e.data.body.code==2&&_.error("请重新登录"),e.data.body.code==1&&_.error("动物不存在"),console.log(e),this.lastImage=""}).catch(e=>{_.error("网络错误")}),this.loading=!0,V.post("/api/admin/animal/get",{pageNum:20,page:0,context:this.context},{headers:T}).then(e=>{this.tableData.list=[];for(var t=0;t<e.data.body.records.length;t++){var a=e.data.body.records[t];a.adopted==!0?a.status="已领养":a.status="未领养",tableData.list.push(a)}totalNum.value=e.data.body.sumNum}).catch(e=>{_.error("网络错误")}),this.loading=!1},confirm1(){V.post("/api/admin/animal/addrecord",{name:this.name,intro:this.intro,adopted:this.adopted,imageId:this.lastImage},{headers:T}).then(e=>{e.data.code!=0?_(e.data.message):_("Success!")}).catch(e=>{console.log(e),_.error("网络错误")}),this.loading=!0,V.post("/api/admin/animal/get",{pageNum:20,page:0,context:this.context},{headers:T}).then(e=>{this.tableData.list=[];for(var t=0;t<e.data.body.records.length;t++){var a=e.data.body.records[t];a.adopted==!0?a.status="已领养":a.status="未领养",tableData.list.push(a)}totalNum.value=e.data.body.sumNum}).catch(e=>{_.error("网络错误")}),this.loading=!1},handleCurrentChange(e){this.loading=!0,this.currentPage=e,V.post("/api/admin/animal/get",{pageNum:20,page:e,context:this.context},{headers:T}).then(t=>{this.tableData.list=[];for(var a=0;a<t.data.body.records.length;a++){var n=t.data.body.records[a];n.adopted==!0?n.status="已领养":n.status="未领养",tableData.list.push(n)}totalNum.value=t.data.body.sumNum}).catch(t=>{_.error("网络错误")}),this.loading=!1},search(){this.loading=!0,V.post("/api/admin/animal/get",{pageNum:20,page:0,context:this.context},{headers:T}).then(e=>{if(console.log(e),this.tableData.list=[],e.data.body.records!=null){for(var t=0;t<e.data.body.records.length;t++){var a=e.data.body.records[t];a.adopted==!0?a.status="已领养":a.status="未领养",this.tableData.list.push(a)}this.totalNum=e.data.body.sumNum}}).catch(e=>{console.log(e),_.error("网络错误")}),this.loading=!1},customRequest(e){console.log("bbb");let t=new window.FormData;t.append("image",e.file),t.append("type","animal"),V.post("/api/picture/upload",t,Ge).then(a=>{console.log(a)}).catch(a=>{console.log(a)})}}}),Je={id:"root"},Qe={class:"basic-box",style:{margin:"20px"}},We={id:"table",class:"basic-box",style:{margin:"20px"}},Xe={class:"dialog-footer"},Ye={class:"dialog-footer"};function Ze(e,t,a,n,l,m){const f=p("el-input"),c=p("el-col"),i=p("el-button"),v=p("el-row"),u=p("el-table-column"),w=p("el-table"),C=p("el-pagination"),s=p("el-form-item"),h=p("upload-outlined"),O=p("a-button"),P=p("a-upload"),k=p("el-option"),x=p("el-select"),I=p("el-form"),D=p("el-dialog"),F=he("loading");return q(),ge("div",Je,[S("div",Qe,[o(v,{gutter:20},{default:r(()=>[o(c,{span:5},{default:r(()=>[o(f,{modelValue:e.context,"onUpdate:modelValue":t[0]||(t[0]=d=>e.context=d),class:"w-50 m-2",placeholder:"搜索档案"},null,8,["modelValue"])]),_:1}),o(c,{span:3},{default:r(()=>[o(i,{type:"primary",onClick:e.search},{default:r(()=>[N("搜索 ")]),_:1},8,["onClick"])]),_:1}),o(c,{span:3},{default:r(()=>[o(i,{type:"primary",icon:"Search",onClick:e.add},{default:r(()=>[N("新增档案")]),_:1},8,["onClick"])]),_:1})]),_:1})]),S("div",We,[be((q(),ve(w,{data:e.tableData.list,style:{width:"100%"},"max-height":"250"},{default:r(()=>[o(u,{prop:"id",label:"动物id",width:"200"}),o(u,{prop:"name",label:"动物名称",width:"200"}),o(u,{prop:"status",label:"领养状态",width:"120"}),o(u,{fixed:"right",label:"Operations"},{default:r(d=>[o(i,{link:"",type:"primary",size:"small",onClick:G(ne=>e.edit(d.$index),["prevent"])},{default:r(()=>[N(" 编辑 ")]),_:2},1032,["onClick"]),o(i,{link:"",type:"primary",size:"small",onClick:G(ne=>e.deleteRow(d.$index),["prevent"])},{default:r(()=>[N(" 删除 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[F,e.loading]]),o(C,{onCurrentChange:e.handleCurrentChange,layout:"total, prev, pager, next",total:e.totalNum},null,8,["onCurrentChange","total"])]),o(D,{modelValue:e.dialogVisible,"onUpdate:modelValue":t[6]||(t[6]=d=>e.dialogVisible=d),title:"编辑档案",width:"50%","before-close":e.handleClose},{footer:r(()=>[S("span",Xe,[o(i,{onClick:t[5]||(t[5]=d=>e.dialogVisible=!1)},{default:r(()=>[N("取消")]),_:1}),o(i,{type:"primary",onClick:e.confirm},{default:r(()=>[N(" 保存 ")]),_:1},8,["onClick"])])]),default:r(()=>[o(I,{model:e.form,"label-width":"120px"},{default:r(()=>[o(s,{label:"动物名称"},{default:r(()=>[o(f,{modelValue:e.name,"onUpdate:modelValue":t[1]||(t[1]=d=>e.name=d)},null,8,["modelValue"])]),_:1}),o(s,{label:"动物介绍"},{default:r(()=>[o(f,{modelValue:e.intro,"onUpdate:modelValue":t[2]||(t[2]=d=>e.intro=d),type:"textarea"},null,8,["modelValue"])]),_:1}),o(s,{label:"动物图片"},{default:r(()=>[o(P,{"file-list":e.fileList,"onUpdate:fileList":t[3]||(t[3]=d=>e.fileList=d),name:"file",customRequest:e.customRequest,onChange:e.handleChange},{default:r(()=>[o(O,null,{default:r(()=>[o(h),N(" Click to Upload ")]),_:1})]),_:1},8,["file-list","customRequest","onChange"])]),_:1}),o(s,{label:"领养状态"},{default:r(()=>[o(x,{modelValue:e.adopted,"onUpdate:modelValue":t[4]||(t[4]=d=>e.adopted=d)},{default:r(()=>[o(k,{label:"已领养",value:!0}),o(k,{label:"未领养",value:!1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","before-close"]),o(D,{modelValue:e.dialogVisible1,"onUpdate:modelValue":t[12]||(t[12]=d=>e.dialogVisible1=d),title:"编辑档案",width:"50%","before-close":e.handleClose},{footer:r(()=>[S("span",Ye,[o(i,{onClick:t[11]||(t[11]=d=>e.dialogVisible1=!1)},{default:r(()=>[N("取消")]),_:1}),o(i,{type:"primary",onClick:e.confirm1},{default:r(()=>[N(" 保存 ")]),_:1},8,["onClick"])])]),default:r(()=>[o(I,{model:e.form,"label-width":"120px"},{default:r(()=>[o(s,{label:"动物名称"},{default:r(()=>[o(f,{modelValue:e.name,"onUpdate:modelValue":t[7]||(t[7]=d=>e.name=d)},null,8,["modelValue"])]),_:1}),o(s,{label:"动物介绍"},{default:r(()=>[o(f,{modelValue:e.intro,"onUpdate:modelValue":t[8]||(t[8]=d=>e.intro=d),type:"textarea"},null,8,["modelValue"])]),_:1}),o(s,{label:"动物图片"},{default:r(()=>[o(P,{"file-list":e.fileList,"onUpdate:fileList":t[9]||(t[9]=d=>e.fileList=d),name:"image",customRequest:e.customRequest,onChange:e.handleChange},{default:r(()=>[o(i,null,{default:r(()=>[o(h),N(" Click to Upload ")]),_:1})]),_:1},8,["file-list","customRequest","onChange"])]),_:1}),o(s,{label:"领养状态"},{default:r(()=>[o(x,{modelValue:e.adopted,"onUpdate:modelValue":t[10]||(t[10]=d=>e.adopted=d)},{default:r(()=>[o(k,{label:"已领养",value:"true"}),o(k,{label:"未领养",value:"false"})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","before-close"])])}const et=me(He,[["render",Ze]]);export{et as default};
